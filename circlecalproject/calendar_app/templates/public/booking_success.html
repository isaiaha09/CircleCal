{% extends "calendar_app/base.html" %}
{% load static %}
{% load tz %}

{% block title %}Booking Confirmed – {{ org.name }}{% endblock %}

{% block content %}
<style>
  .booking-success-card {
    background: #ffffff;
    border-radius: 18px;
    border: 1px solid rgba(17, 24, 39, 0.06);
    box-shadow:
      0 14px 34px rgba(17, 24, 39, 0.10),
      0 2px 10px rgba(17, 24, 39, 0.06);
    transform: translateZ(0);
  }
</style>

<div class="booking-success-card max-w-xl mx-auto p-6 mt-8">
  <h1 class="text-2xl font-semibold text-green-700 mb-2">Booking Confirmed</h1>
  <p class="text-gray-700 mb-4">Thank you, {{ booking.client_name }}. Your booking has been confirmed.</p>

  <div class="space-y-2 text-gray-800">
    <div><strong>Business:</strong> {{ org.name }}</div>
    <div><strong>Service:</strong> {{ service.name }}</div>
    {% timezone org.timezone %}
      <div><strong>Date:</strong> {{ booking.start|date:"D, M j, Y" }}</div>
      <div><strong>Time:</strong> {{ booking.start|time:"g:i A" }} – {{ booking.end|time:"g:i A" }}</div>
    {% endtimezone %}
    <div><strong>Email:</strong> {{ booking.client_email }}</div>

    {% if booking.payment_method and booking.payment_method != 'none' %}
      <div>
        <strong>Payment method:</strong>
        {% if booking.payment_method == 'stripe' %}
          Card
        {% elif booking.payment_method == 'offline' %}
          {% if booking.offline_payment_method %}
            {% with m=booking.offline_payment_method|lower %}
              {% if m == 'venmo' %}Venmo{% elif m == 'zelle' %}Zelle{% elif m == 'cash' %}Cash{% else %}Offline{% endif %}
            {% endwith %}
          {% else %}
            Offline
          {% endif %}
        {% else %}
          {{ booking.payment_method }}
        {% endif %}
      </div>
      {% if booking.payment_method == 'stripe' %}
        <div><strong>Payment status:</strong> {{ booking.payment_status|default:"pending" }}</div>
      {% endif %}
      {% if booking.payment_method == 'offline' and offline_instructions %}
        <div class="text-sm text-gray-700 mt-2">
          <strong>Payment instructions:</strong>
          <div class="mt-1 whitespace-pre-line">{{ offline_instructions }}</div>
        </div>
      {% endif %}
    {% endif %}
  </div>

  <div class="mt-6 flex gap-3">
    <a href="{% url 'bookings:public_service_page' org.slug service.slug %}" class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300">Book another</a>
    <a href="{% url 'bookings:public_org_page' org.slug %}" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Back to services</a>
  </div>
</div>
{% endblock %}