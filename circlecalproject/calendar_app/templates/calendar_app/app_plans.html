{% extends "calendar_app/base.html" %}
{% block title %}Plans{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
  <div class="bg-white border border-blue-100 rounded-2xl shadow-lg p-6 sm:p-8">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold text-blue-700">Plans</h1>
      <p class="text-sm text-gray-600 mt-2">Read-only plan details (no changes in the mobile app).</p>
    </div>

    <div class="rounded-xl border border-gray-200 bg-gray-50 p-4 mb-6">
      <p class="text-gray-800 font-semibold">Current plan</p>
      <p class="text-gray-700 mt-1">
        {% if current_plan and current_plan.name %}
          {{ current_plan.name }}
        {% elif plan_slug %}
          {{ plan_slug|capfirst }}
        {% else %}
          —
        {% endif %}
        {% if subscription and subscription.status %}
          <span class="text-gray-500">· {{ subscription.status }}</span>
        {% endif %}
      </p>

      <div class="mt-4 flex flex-wrap gap-2">
        <a href="{% url 'calendar_app:contact' %}?cc_app=1" class="px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition">Contact support</a>
        <a href="{% url 'calendar_app:dashboard' org.slug %}?cc_app=1" class="px-4 py-2 rounded-lg border border-gray-300 bg-white text-gray-800 font-semibold hover:bg-gray-100 transition">Back to dashboard</a>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
      <div class="rounded-xl border border-gray-200 p-4">
        <p class="font-semibold text-gray-800">What your plan enables</p>
        <ul class="mt-3 space-y-2 text-gray-700">
          <li>Resources: <span class="font-semibold">{% if can_use_resources %}Enabled{% else %}Not enabled{% endif %}</span></li>
          <li>Add staff: <span class="font-semibold">{% if can_add_staff %}Enabled{% else %}Not enabled{% endif %}</span></li>
          <li>Add services: <span class="font-semibold">{% if can_add_service %}Enabled{% else %}Not enabled{% endif %}</span></li>
          <li>Weekly availability: <span class="font-semibold">{% if can_edit_weekly_availability %}Enabled{% else %}Not enabled{% endif %}</span></li>
          <li>Offline payments: <span class="font-semibold">{% if can_use_offline_payment_methods %}Enabled{% else %}Not enabled{% endif %}</span></li>
        </ul>
      </div>

      <div class="rounded-xl border border-gray-200 p-4">
        <p class="font-semibold text-gray-800">Plan options</p>
        <p class="text-sm text-gray-600 mt-1">These are informational only inside the app.</p>
        <div class="mt-3 space-y-3">
          {% for p in plans %}
            <div class="rounded-lg border border-gray-200 p-3 {% if current_plan and p.slug == current_plan.slug %}bg-blue-50 border-blue-200{% else %}bg-white{% endif %}">
              <div class="flex items-center justify-between gap-2">
                <div class="font-semibold text-gray-900">{{ p.name }}</div>
                {% if current_plan and p.slug == current_plan.slug %}
                  <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700 border border-blue-200">Current</span>
                {% endif %}
              </div>
              {% if p.description %}
                <div class="text-sm text-gray-600 mt-1">{{ p.description }}</div>
              {% endif %}
            </div>
          {% empty %}
            <div class="text-gray-700">No plans available.</div>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="text-xs text-gray-500 text-center">
      Billing changes are not available in the mobile app.
    </div>
  </div>
</div>
{% endblock %}
